<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>STLL: Tutorial</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">STLL
   &#160;<span id="projectnumber">0.0</span>
   </div>
   <div id="projectbrief">Simple Text Layouting Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('tutorial_pg.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Tutorial </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>To layout text you basically have two options:</p><ul>
<li>use the paragraph layouter</li>
<li>use the XHTML layouter</li>
</ul>
<h1><a class="anchor" id="tut_basic_sec"></a>
Using the Paragraph Layouter</h1>
<p>The paragraph layouter is a basic layouter for one or more paragraphs of text. Its input is a unicode string, some settings and a set of properties for each and every character in the string to format.</p>
<p>That way it is possible to change a single character to underlined, or red or make is using a different font</p>
<p>To use the paragraph layouter you need to use code like the following: </p><div class="fragment"><div class="line"><span class="comment">// includes for the layouter and the SDL output functions, if you want to</span></div>
<div class="line"><span class="comment">// output the text using a different graphics library, you need a different</span></div>
<div class="line"><span class="comment">// include here</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="layouter_8h.html">stll/layouter.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="output___s_d_l_8h.html">stll/output_SDL.h</a>&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="comment">// all STLL symbols are in the namespace STLL</span></div>
<div class="line"><span class="keyword">using namespace </span><a class="code" href="namespace_s_t_l_l.html">STLL</a>;</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">  <span class="comment">// create a font cache to get fonts. the font cache will take care of</span></div>
<div class="line">  <span class="comment">// opening font files and providing it to the application. you need to</span></div>
<div class="line">  <span class="comment">// keep the object alive until you are done with the layouting and the output</span></div>
<div class="line">  <span class="comment">// usually you will have one font cache per application</span></div>
<div class="line">  <a class="code" href="class_s_t_l_l_1_1_font_cache__c.html">FontCache_c</a> fc;</div>
<div class="line"></div>
<div class="line">  <span class="comment">// setup the attributes for the text you want to output</span></div>
<div class="line">  <span class="comment">// we use a font from the fontcache and the color white</span></div>
<div class="line">  <span class="comment">// we also use the English language</span></div>
<div class="line">  <span class="comment">// keep in mind that the font size is given in units of 1/64th, so</span></div>
<div class="line">  <span class="comment">// multiply by 64</span></div>
<div class="line">  <a class="code" href="class_s_t_l_l_1_1_codepoint_attributes__c.html">CodepointAttributes_c</a> attr;</div>
<div class="line">  attr.<a class="code" href="class_s_t_l_l_1_1_codepoint_attributes__c.html#a66a7b8da57506db6ab7f69c1a25d5af8">font</a> = fc.<a class="code" href="class_s_t_l_l_1_1_font_cache__c.html#a15da3357ff0b5336f97960ee7949991f">getFont</a>(<a class="code" href="class_s_t_l_l_1_1_font_resource__c.html">FontResource_c</a>(<span class="stringliteral">&quot;tests/FreeSans.ttf&quot;</span>), 20*64);</div>
<div class="line">  attr.<a class="code" href="class_s_t_l_l_1_1_codepoint_attributes__c.html#a90967aca24ccb9148956dfa80c4361fa">c</a> = <a class="code" href="class_s_t_l_l_1_1_color__c.html">Color_c</a>(255, 255, 255);</div>
<div class="line">  attr.<a class="code" href="class_s_t_l_l_1_1_codepoint_attributes__c.html#aea2a394f4ea12aacfcce261019e295bc">lang</a> = <span class="stringliteral">&quot;en&quot;</span>;</div>
<div class="line"></div>
<div class="line">  <span class="comment">// setup the attribute index. This index assigns attributes to</span></div>
<div class="line">  <span class="comment">// all the characters in your text, the way we create it here</span></div>
<div class="line">  <span class="comment">// will setup the index in such a way, that _all_ characters will</span></div>
<div class="line">  <span class="comment">// have the given attribute</span></div>
<div class="line">  <a class="code" href="class_s_t_l_l_1_1_attribute_index__c.html">AttributeIndex_c</a> ai(attr);</div>
<div class="line"></div>
<div class="line">  <span class="comment">// just to show how: make the 6th glyph (the W) red</span></div>
<div class="line">  attr.<a class="code" href="class_s_t_l_l_1_1_codepoint_attributes__c.html#a90967aca24ccb9148956dfa80c4361fa">c</a> = <a class="code" href="class_s_t_l_l_1_1_color__c.html">Color_c</a>(255, 0, 0);</div>
<div class="line">  ai.set(6, attr);</div>
<div class="line"></div>
<div class="line">  <span class="comment">// layouting properties, the default is good enough for us right now</span></div>
<div class="line">  <a class="code" href="class_s_t_l_l_1_1_layout_properties__c.html">LayoutProperties_c</a> prop;</div>
<div class="line"></div>
<div class="line">  <span class="comment">// now layout the text &quot;Hello World&quot; with the given attributes, put</span></div>
<div class="line">  <span class="comment">// it into a rectangle of width 200 pixel and use our layouting properties</span></div>
<div class="line">  <span class="comment">// the text needs to be utf-32 encoded for this function</span></div>
<div class="line">  <span class="keyword">auto</span> layout = <a class="code" href="namespace_s_t_l_l.html#ab663fe7dceae4de54ddc5076a4c8c2dc">layoutParagraph</a>(U<span class="stringliteral">&quot;Hello World&quot;</span>, ai, <a class="code" href="class_s_t_l_l_1_1_rectangle_shape__c.html">RectangleShape_c</a>(200*64), prop);</div>
<div class="line"></div>
<div class="line">  <span class="comment">// that is it, now you can output the layout, using one of the Output</span></div>
<div class="line">  <span class="comment">// driver functions, e.g. using the SDL driver you can output the text</span></div>
<div class="line">  <span class="comment">// at position 20, 20 on the given surface (also in units of 1/64th)</span></div>
<div class="line">  SDL_Surface *screen = SDL_SetVideoMode(800, 600, 32, SDL_SWSURFACE | SDL_DOUBLEBUF);</div>
<div class="line"></div>
<div class="line">  <span class="comment">// create the output object, with glyph cache and all local storage, keep this</span></div>
<div class="line">  <span class="comment">// object around for the lifetime of your program</span></div>
<div class="line">  <a class="code" href="class_s_t_l_l_1_1show_s_d_l.html">showSDL&lt;&gt;</a> show;</div>
<div class="line">  show.<a class="code" href="class_s_t_l_l_1_1show_s_d_l.html#ab2700b9c5c42c9e8d6c0d5479a913d84">showLayout</a>(layout, 20*64, 20*64, screen);</div>
<div class="line">  SDL_Flip(screen);</div>
<div class="line">  sleep(10);</div>
<div class="line"></div>
<div class="line">  <span class="comment">// now you can get rid of the cache, if you want</span></div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="tut_xhtml_sec"></a>
Using the XHTML Layouter</h1>
<p>The XHTML layouter takes a subsection of XHTML as a string and parses it and uses the paragraph layouter to layout the text. Here you specify the format using html and css-like formatting information.</p>
<p>The XHTML Layouter comes with 2 entry points. One takes a string, parses that string into a DOM-tree and works with that tree.</p>
<p>The other choice is to directly input a DOM-tree on your own.</p>
<p>For the XHTML layouter the flow is slightly different: </p><div class="fragment"><div class="line"><span class="comment">// you have to define the xml library you want to use for the xml</span></div>
<div class="line"><span class="comment">// parser. STLL needs to be compiled with this library</span></div>
<div class="line"><span class="preprocessor">#define USE_PUGI_XML</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="layouter_x_h_t_m_l_8h.html">stll/layouterXHTML.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="output___s_d_l_8h.html">stll/output_SDL.h</a>&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">using namespace </span><a class="code" href="namespace_s_t_l_l.html">STLL</a>;</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">  <span class="comment">// setup a stylesheet, this will automatically creata a font cache</span></div>
<div class="line">  <span class="comment">// for you. typically you will have one or only a few stylesheets in</span></div>
<div class="line">  <span class="comment">// your application, if you have more than one you should share the</span></div>
<div class="line">  <span class="comment">// font cache between them</span></div>
<div class="line">  <a class="code" href="class_s_t_l_l_1_1_text_style_sheet__c.html">TextStyleSheet_c</a> styleSheet;</div>
<div class="line"></div>
<div class="line">  <span class="comment">// add the fonts that are required</span></div>
<div class="line">  <span class="comment">// we create one font family named &quot;sans&quot; with 2 members, a normal and a bold one</span></div>
<div class="line">  styleSheet.<a class="code" href="class_s_t_l_l_1_1_text_style_sheet__c.html#a7f7e8de26907406e854b770d33a6df99">addFont</a>(<span class="stringliteral">&quot;sans&quot;</span>, <a class="code" href="class_s_t_l_l_1_1_font_resource__c.html">FontResource_c</a>(<span class="stringliteral">&quot;tests/FreeSans.ttf&quot;</span>));</div>
<div class="line">  styleSheet.<a class="code" href="class_s_t_l_l_1_1_text_style_sheet__c.html#a7f7e8de26907406e854b770d33a6df99">addFont</a>(<span class="stringliteral">&quot;sans&quot;</span>, <a class="code" href="class_s_t_l_l_1_1_font_resource__c.html">FontResource_c</a>(<span class="stringliteral">&quot;tests/FreeSansBold.ttf&quot;</span>), <span class="stringliteral">&quot;normal&quot;</span>, <span class="stringliteral">&quot;normal&quot;</span>, <span class="stringliteral">&quot;bold&quot;</span>);</div>
<div class="line"></div>
<div class="line">  <span class="comment">// add the CSS rules you need, this should be familiar to everybody knowing CSS</span></div>
<div class="line">  styleSheet.<a class="code" href="class_s_t_l_l_1_1_text_style_sheet__c.html#a960a9f109e846aed17a38b914a995545">addRule</a>(<span class="stringliteral">&quot;body&quot;</span>, <span class="stringliteral">&quot;color&quot;</span>, <span class="stringliteral">&quot;#ffffff&quot;</span>);</div>
<div class="line">  styleSheet.<a class="code" href="class_s_t_l_l_1_1_text_style_sheet__c.html#a960a9f109e846aed17a38b914a995545">addRule</a>(<span class="stringliteral">&quot;body&quot;</span>, <span class="stringliteral">&quot;font-size&quot;</span>, <span class="stringliteral">&quot;20px&quot;</span>);</div>
<div class="line">  styleSheet.<a class="code" href="class_s_t_l_l_1_1_text_style_sheet__c.html#a960a9f109e846aed17a38b914a995545">addRule</a>(<span class="stringliteral">&quot;body&quot;</span>, <span class="stringliteral">&quot;text-align&quot;</span>, <span class="stringliteral">&quot;justify&quot;</span>);</div>
<div class="line">  styleSheet.<a class="code" href="class_s_t_l_l_1_1_text_style_sheet__c.html#a960a9f109e846aed17a38b914a995545">addRule</a>(<span class="stringliteral">&quot;body&quot;</span>, <span class="stringliteral">&quot;padding&quot;</span>, <span class="stringliteral">&quot;10px&quot;</span>);</div>
<div class="line">  styleSheet.<a class="code" href="class_s_t_l_l_1_1_text_style_sheet__c.html#a960a9f109e846aed17a38b914a995545">addRule</a>(<span class="stringliteral">&quot;h1&quot;</span>, <span class="stringliteral">&quot;font-weight&quot;</span>, <span class="stringliteral">&quot;bold&quot;</span>);</div>
<div class="line">  styleSheet.<a class="code" href="class_s_t_l_l_1_1_text_style_sheet__c.html#a960a9f109e846aed17a38b914a995545">addRule</a>(<span class="stringliteral">&quot;h1&quot;</span>, <span class="stringliteral">&quot;font-size&quot;</span>, <span class="stringliteral">&quot;60px&quot;</span>);</div>
<div class="line">  styleSheet.<a class="code" href="class_s_t_l_l_1_1_text_style_sheet__c.html#a960a9f109e846aed17a38b914a995545">addRule</a>(<span class="stringliteral">&quot;h1&quot;</span>, <span class="stringliteral">&quot;text-align&quot;</span>, <span class="stringliteral">&quot;center&quot;</span>);</div>
<div class="line">  styleSheet.<a class="code" href="class_s_t_l_l_1_1_text_style_sheet__c.html#a960a9f109e846aed17a38b914a995545">addRule</a>(<span class="stringliteral">&quot;h1&quot;</span>, <span class="stringliteral">&quot;background-color&quot;</span>, <span class="stringliteral">&quot;#FF8080&quot;</span>);</div>
<div class="line"></div>
<div class="line">  <span class="comment">// The XHTML code we want to format, it needs to be utf-8 encoded</span></div>
<div class="line">  std::string text = u8<span class="stringliteral">&quot;&lt;html&gt;&lt;body&gt;&lt;h1&gt;Title&lt;/h1&gt;&lt;p&gt;Some text&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;&quot;</span>;</div>
<div class="line"></div>
<div class="line">  <span class="comment">// layout the XHTML code, in a 200 pixel wide rectangle</span></div>
<div class="line">  <span class="keyword">auto</span> layout = <a class="code" href="namespace_s_t_l_l.html#a6b3018805d08e36d166c6247c1d0783b">layoutXHTMLPugi</a>(text, styleSheet, <a class="code" href="class_s_t_l_l_1_1_rectangle_shape__c.html">RectangleShape_c</a>(200*64));</div>
<div class="line"></div>
<div class="line">  <span class="comment">// again output the layout</span></div>
<div class="line">  SDL_Surface *screen = SDL_SetVideoMode(800, 600, 32, SDL_SWSURFACE | SDL_DOUBLEBUF);</div>
<div class="line"></div>
<div class="line">  <a class="code" href="class_s_t_l_l_1_1show_s_d_l.html">showSDL&lt;&gt;</a> show;</div>
<div class="line">  show.<a class="code" href="class_s_t_l_l_1_1show_s_d_l.html#ab2700b9c5c42c9e8d6c0d5479a913d84">showLayout</a>(layout, 20*64, 20*64, screen);</div>
<div class="line">  SDL_Flip(screen);</div>
<div class="line">  sleep(10);</div>
<div class="line">}</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Jan 28 2016 21:45:13 for STLL by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
